function MM_openBrWindow(e,t,n){newWindow=window.open(e,t,n),newWindow.focus()}function seoPopulate(e,t){if("undefined"==typeof t)var t=e;e=e.replace(/[^a-zA-Z 0-9-]+/g,""),t=removeHTMLTags(t),t=t.replace(/[^a-zA-Z 0-9\/-]+/g,""),longID=e.replace("- ",""),longID=longID.replace(/[ ]+/g,spaceReplace),longID.match(/(admin|articles|calendar|contact|core|documents|directory|forms|forum|furniture|help|local|location|login|mail|members|news|photos|products|requests|search|seo|surveys|terms|video)/gi)&&(longID+="-section"),""==document.getElementById("longID").value&&(document.getElementById("longID").value=longID.toLowerCase()),""==document.getElementById("metadescription").value&&(document.getElementById("metadescription").value=truncate(t,250)),""==document.getElementById("metakeywords").value&&(document.getElementById("metakeywords").value=e)}function addBookmark(e,t){t=t.replace(/\?SearchTerm=(\d)*/,""),t="http://"+window.location.host+t,window.sidebar?window.sidebar.addPanel(e,t,""):document.all?window.external.AddFavorite(t,e):alert("Your browser doesn't support automatic bookmarking.\n\nIn Firefox or Safari use the Bookmarks menu.")}function addToFavourites(e,t){return confirm("Do you want to add this page to your favourites?\n\nIt will appear on the list in your Control Panel home page.")&&getData("/admin/favourites/ajax/addtofavourites.php?url="+escape(e)+"&pagetitle="+escape(t),"favouritescallback"),!1}function removeHTMLTags(e){var t=e.replace(/(<([^>]+)>)/gi," ");return t=t.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")}function truncate(e,t,n){if("undefined"==typeof t)var t=100;if("undefined"==typeof n)var n="...";if(e.length<t)return e;for(var i=t-1;" "!=e.charAt(i);i--)t--;return e.substr(0,t)+n}function setCookie(e,t,n,i,o,r){i="undefined"==typeof i?"/":i,o="undefined"==typeof i?"":o,r="undefined"==typeof i?"":r;var a=new Date;a.setTime(a.getTime()),n&&(n=1e3*n*60*60*24);var s=new Date(a.getTime()+n);document.cookie=e+"="+escape(t)+(n?";expires="+s.toGMTString():"")+(i?";path="+i:"")+(o?";domain="+o:"")+(r?";secure":"")}function getCookie(e){var t=document.cookie.split(";"),n="",o="",r="",a=!1;for(i=0;i<t.length;i++){if(n=t[i].split("="),o=n[0].replace(/^\s+|\s+$/g,""),o==e)return a=!0,n.length>1&&(r=unescape(n[1].replace(/^\s+|\s+$/g,""))),r;n=null,o=""}return a?void 0:null}function deleteCookie(e,t,n){t="undefined"==typeof t?"/":t,n="undefined"==typeof t?"":n,getCookie(e)&&(document.cookie=e+"="+(t?";path="+t:"")+(n?";domain="+n:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT")}function getRadioValue(e){var t=null,n=document.getElementById(e),i=null;if(i=null==n?e:n.name,null==i)return null;for(var o=document.getElementsByTagName("input"),r=0;r<o.length;r++){var a=o[r];if("radio"==a.type&&a.name==i&&a.checked){t=a.value;break}}return t}function setSelectListToValue(e,t){var n,i,o,r=setSelectListToValue.arguments;if(null!=(obj=document.getElementById(r[1]))){for(o=r[0],n=0;n<obj.length;n++)obj.options[n].value==o&&(i=n);obj.selectedIndex=i}}function getUrlVars(){for(var e,t=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<n.length;i++)e=n[i].split("="),t.push(e[0]),t[e[0]]=e[1];return t}function submitAndGo(e){return document.getElementById("returnURL").value=e,document.forms[0].submit(),!1}function writeEmail(e,t,n){n=n||"",email=e+"@"+t,document.write(n+"<a href='mailto:"+email+"'>"+email+"</a>")}function printFormatWindow(){var e=document.getElementById("content").innerHTML;e.indexOf("<textarea")>0&&confirm("Do you want to convert text boxes for print?\n\nScroll bars will be removed and text boxes will no longer be editable.")&&(e=e.replace(/<textarea/g,"<p style='white-space:pre-wrap; height: auto;'"),e=e.replace(/textarea/g,"p"),document.getElementById("content").innerHTML=e),window.print()}function openMainWindow(e){"undefined"!=typeof fb_editor_domain&&"http://"!=e.substr(0,7)&&(e="http://"+fb_editor_domain+e),"undefined"==typeof mainSiteWindow&&(top.opener&&!top.opener.closed?mainSiteWindow=top.opener:mainSiteWindow=window.open(e,"mainSite")),mainSiteWindow.location.href=e,mainSiteWindow.focus()}function logOutCheck(){return message="Are you sure you want to log out?",getCookie("cookieusername")&&(message+="\n\nThis will override the 'Stay logged in' checkbox."),confirm(message)}function hasClass(e){var t=!1;return null!=e.getAttributeNode("class")&&(t=e.getAttributeNode("class").value),t}function getFileName(){var e=document.location.href;return e=e.substring(0,-1==e.indexOf("#")?e.length:e.indexOf("#")),e=e.substring(0,-1==e.indexOf("?")?e.length:e.indexOf("?")),e=e.substring(e.lastIndexOf("/")+1,e.length)}function insertAfter(e,t){e.parentNode.insertBefore(t,e.nextSibling)}function goFullscreen(e){var t=document.getElementById(e);t.requestFullScreen?t.requestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()}function getData(e,t,n,i,o){var r=!1;if(window.XMLHttpRequest?r=new XMLHttpRequest:window.ActiveXObject&&(r=new ActiveXObject("Microsoft.XMLHttp")),r){if("undefined"!=typeof t&&""!=t){var a=document.getElementById(t);n="undefined"==typeof n?a:document.getElementById(n),i="undefined"==typeof i?"<img src='/core/images/loading_16x16.gif' width='16' height='16' border='0' style='vertical-align: middle;'>":i,""!=i&&(n.innerHTML=i)}r.open("GET",e),r.onreadystatechange=function(){4==r.readyState&&200==r.status&&("undefined"!=typeof a&&(n.innerHTML="",a.innerHTML=r.responseText),delete r,r=null),"undefined"!=typeof o&&o()},r.send(null)}}function postData(e,t,n){var i=!1;if(window.XMLHttpRequest?i=new XMLHttpRequest:window.ActiveXObject&&(i=new ActiveXObject("Microsoft.XMLHttp")),i){var o=document.getElementById(n);o.innerHTML="<img src='/core/images/loading_16x16.gif' width='16' height='16' border='0' style='vertical-align: middle;'>",i.open("POST",e),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){4==i.readyState&&200==i.status&&(o.innerHTML=i.responseText,delete i,i=null)},i.send(t)}}function getXmlHttpRequestObject(){return window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):void 0}function searchSuggest(e){if(4==searchReq.readyState||0==searchReq.readyState){var t=escape(document.getElementById("s").value);t.length>2?(document.getElementById("search_suggest").style.display="block",e=e?e:"/includes/searchSuggest.php",searchReq.open("GET",e+"?wordsearch="+t,!0),searchReq.onreadystatechange=handleSearchSuggest,searchReq.send(null)):document.getElementById("search_suggest").innerHTML=""}}function handleSearchSuggest(){if(4==searchReq.readyState){var e=document.getElementById("search_suggest");e.innerHTML="";var t=searchReq.responseText.split("\n");for(i=0;i<t.length-1;i++){var n='<div onmouseover="javascript:suggestOver(this);" ';n+='onmouseout="javascript:suggestOut(this);" ',n+='onclick="javascript:setSearch(this.innerHTML);" ',n+='class="suggest_link">'+t[i]+"</div>",e.innerHTML+=n}}}function suggestOver(e){e.className="suggest_link_over"}function suggestOut(e){e.className="suggest_link"}function setSearch(e){document.getElementById("s").value=decodeHTML(e),document.getElementById("search_suggest").innerHTML="",document.getElementById("search_suggest").style.display="none"}function addListener(e,t,n){n="undefined"==typeof n?window:n,n.addEventListener?n.addEventListener(e,t,!1):n.attachEvent&&n.attachEvent("on"+e,t,!1)}function removeListener(e,t,n){n="undefined"==typeof n?window:n,n.removeEventListener?n.removeEventListener(e,t,!1):n.detachEvent&&n.detachEvent("on"+e,t,!1)}function decodeHTML(e){for(var t=[["&","&"],["Â "," "]],n=e.replace(/<[^>]*>/g,""),i=0,o=t.length;o>i;++i)n=n.replace(new RegExp(t[i][0],"ig"),t[i][1]);return n}function phoneHome(e,t,n){window.jQuery&&$.ajax({url:"http://www.digitaldexterity.co.uk/local/phonehome/index.php?licence="+escape(e)+"&host="+escape(t)+"&installed="+escape(n),timeout:5e3,error:function(e,t,n){},success:function(e){""!=e&&alert(e)}})}function create_search_picker_select(e,t,n){$("#"+e).addClass("search_picker_id"),$("#"+e).css("left","-999em"),$("#"+e).wrap("<div class='search_picker_wrapper' data-search-picker-id='"+e+"'></div>"),$("#"+e).after('<input type="hidden" class="search_picker_initial_val" id="search_picker_initial_val_'+e+'" value="'+$("#"+e).val()+'"><input type="text" maxlength="50" size="50" placeholder="'+n+'" class="search_picker_textbox" id="search_picker_textbox_'+e+'" autocomplete="off"><span class="search_picker_selected_text"></span><div class="search_picker_list"></div>'),$("#search_picker_initial_val_"+e).val($("#"+e).val()),$("#search_picker_textbox_"+e).keydown(function(t){27==t.which&&search_picker_reset(e),40==t.which&&$(this).parents(".search_picker_wrapper").find(".search_picker_list").css("background","red")}),$("#search_picker_textbox_"+e).keyup(function(){var e=$(this),n=$(this).val();n.length>2?$.get(t,{search:n},function(t,n){e.parents(".search_picker_wrapper").find(".search_picker_list").html(t)}):e.parents(".search_picker_wrapper").find(".search_picker_list").html("")})}function search_picker_select(e,t){thePickerWrapper=$(e).parents(".search_picker_wrapper"),selectedID=$(e).attr("data-id"),thePickerWrapper.find(".search_picker_id").val(selectedID),theInputID=thePickerWrapper.find(".search_picker_id").attr("id");var n=$(e).html()+" <a onclick='search_picker_reset(\""+theInputID+"\")'><span class='glyphicon glyphicon-remove'></span></a>";thePickerWrapper.find(".search_picker_selected_text").html(n),thePickerWrapper.find(".search_picker_textbox").hide(),thePickerWrapper.find(".search_picker_textbox").val(""),thePickerWrapper.find(".search_picker_list").html(""),search_picker_close(thePickerWrapper),"undefined"!=typeof t&&t(selectedID)}function search_picker_reset(e){$(".search_picker_selected_text").html(""),$(".search_picker_list").html(""),$(".search_picker_textbox").val(""),$(".search_picker_textbox").show(),$("#"+e).val($("#search_picker_initial_val_"+e).val())}var commonjsversion=2,spaceReplace="-";document.write("<style> .javascriptOnly { display:block; }</style>"),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")});var ajaxManager={requests:[],addReq:function(e){this.requests.push(e),1==this.requests.length&&this.run()},removeReq:function(e){$.inArray(e,requests)>-1&&this.requests.splice($.inArray(e,requests),1)},run:function(){oricomplete=this.requests[0].complete;var e=this;e.requests[0].complete=function(){"function"==typeof oricomplete&&oricomplete(),e.requests.shift(),e.requests.length>0&&e.run()},$.ajax(this.requests[0])},stop:function(){this.requests=[]}},fbAjaxFrameworkVersion=3,searchReq=getXmlHttpRequestObject();!function(e){jQuery.sessionTimeout=function(t){function n(t){switch(t){case"start":o=setTimeout(function(){e.each(c.closeModals,function(t,n){e("#"+n).modal("hide")}),document.title=c.titleMessage,e("#sessionTimeout-dialog").modal("show"),i("start")},c.warnAfter);break;case"stop":clearTimeout(o)}}function i(e){switch(e){case"start":r=setTimeout(function(){window.location=c.redirUrl},c.redirAfter-c.warnAfter);break;case"stop":clearTimeout(r)}}var o,r,a=[],s={title:"Your session is about to expire!",message:"For security, you will shortly be logged out automatically if you do not respond to this message.",titleMessage:"Warning: Time Out",stayConnectedBtn:"Stay connected",logoutBtn:"Logout",closeModals:a,keepAliveUrl:"/login/ajax/keep_session_alive.ajax.php",redirUrl:"/login/logout.php?msg=For+security+you+have+been+automatically+logged+out+after+a+period+of+no+activity.",logoutUrl:"/login/logout.php",warnAfter:9e5,redirAfter:12e5},c=s;t&&(c=e.extend(s,t)),e("body").append('<div class="modal fade" id="sessionTimeout-dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">'+c.title+'</h4></div><div class="modal-body">'+c.message+'</div><div class="modal-footer"><div class="btn-group"><button id="sessionTimeout-dialog-logout" type="button" class="btn btn-danger">'+c.logoutBtn+'</button><button id="sessionTimeout-dialog-keepalive" type="button" class="btn btn-success" data-dismiss="modal">'+c.stayConnectedBtn+"</button></div></div></div></div></div>"),e("#sessionTimeout-dialog-logout").on("click",function(){window.location=c.logoutUrl}),e("#sessionTimeout-dialog").on("hide.bs.modal",function(){e.ajax({type:"POST",url:c.keepAliveUrl}),i("stop"),n("start")}),n("start")}}(jQuery);